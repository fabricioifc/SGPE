<%= bootstrap_form_for(grid, local:true, html: { class: "", role: "form" }) do |f| %>
  <%= error_messages_for(grid) %>

    <%= f.select :year, (Time.zone.now.year - 50)..(Time.zone.now.year + 2), id: :grid_year, selected: Time.zone.now.year, autofocus:true %>
    <%= f.select :course_id, @cursos.collect { |c| ["#{c.sigla} - #{c.name}", c.id] }, id: :grid_course, prompt: true %>
    <%= f.check_box :active, id: :grid_active %>

    <hr>

    <%= link_to_add_association 'Adicionar disciplina', f, :grid_disciplines,
    'data-association-insertion-node' => '#grid_disciplines',
    'data-association-insertion-method' => 'append',
    :wrap_object => Proc.new {|grid_discipline| grid_discipline.build; grid_disciplines }

     %>

     <fieldset id="grid_disciplines">
       <%= f.fields_for :grid_disciplines_attributes do |g| %>
          <%= render partial: 'grid_discipline_fields', locals: { f: g } %>
       <% end %>
     </fieldset>

  <%= f.submit class: "btn btn-primary" %>
<% end %>
