<%= bootstrap_form_for(offer, local:true, label_errors: true, inline_errors: true, html: { class: "", role: "form" }) do |f| %>
  <%= error_messages_for(offer) %>

  <div class="row">
    <div class="col-md-3">
      <%= f.select :type_offer, Offer.offer_types.keys, {id: :type_offer, prompt: true, autofocus:true} %>
    </div>
    <div class="col-md-3">
      <%= f.number_field :year, id: :offer_year, placeholder:true %>
    </div>
    <div class="col-md-3">
      <%= f.number_field :semestre, id: :offer_semestre, placeholder:'1,2,3...' %>
    </div>
    <div class="col-md-3">
      <%= f.label :grid_id %>
      <%= select_tag :grid_id, options_for_select(@grades.collect { |c| ["#{c[4]} - #{c[3]} (Ano/semestre: #{c[1]}/#{c[2]})", "#{c[0]}_#{c[1]}_#{c[2]}" ]}, params[:grid_id]),
        data: { remote: true, url: load_grid_offers_path, method: :patch },
        id: :grid_id, class: 'form-control', prompt:'Selecione a grade' %>
    </div>
    <div id="grid_disciplines_partial">
      <% if !offer.offer_disciplines.empty? %>
        <% first = 0 %>
        <% por_grupo = 2%>
        <% ofertas = @offer.offer_disciplines.in_groups_of(por_grupo, false) %>

        <% ofertas.each do |a| %>
          <div class="col-md-4">
            <table class='table table-striped table-bordered table-condensed'>
              <thead>
                <tr>
                  <th>Disciplina</th>
                  <th>Professor</th>
                </tr>
              </thead>
              <tbody>
                <%= f.fields_for :offer_disciplines, @offer.offer_disciplines[first, por_grupo] do |b| %>
                  <%= render partial: 'offer_discipline_item', locals: {g: b} %>
                <% end %>
              </tbody>
            </table>
          </div>
          <% first = first + a.count %>
        <% end %>
      <% end %>
    </div>
  </div>

  <hr>

  <%= f.submit class: "btn btn-primary" %>
<% end %>
