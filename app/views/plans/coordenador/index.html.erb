<%- model = Plan %>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Filtros</h3>
  </div>
  <div class="panel-body">
    <%= form_with(url: planos_pesquisar_path, local:true, method: :get) do |f| %>

      <div class="form-group col-md-3">
        <%= label_tag :ano, 'Ano da oferta' %>
        <%= select_tag :ano, options_for_select(@anos, Date.today.year), id: :ano, class: 'form-control', prompt:'Ano' %>
      </div>

      <div class="form-group col-md-3">
        <%= label_tag :semestre, 'Semestre da oferta' %>
        <%= select_tag :semestre, options_for_select(@semestres), id: :semestre, class: 'form-control', prompt:'Semestre' %>
      </div>

      <div class="form-group col-md-6">
        <%= label_tag :curso, 'Curso' %>
        <%= select_tag :curso, options_from_collection_for_select(@cursos, "id", "name", @cursos.last.id), id: :curso, class: 'form-control', prompt:'Selecione o curso' %>
      </div>

      <!-- <div class="form-group col-md-12">
        <= f.check_box :analise, id: :plan_analise %>
        <= f.label :analise %>
        <= f.check_box :aprovado, id: :plan_aprovado %>
        <= f.label :aprovado %>
        <= f.check_box :reprovado, id: :plan_reprovado %>
        <= f.label :reprovado %>
      </div> -->

      <!-- <= f.select :resource_type, get_models.collect { |c| [c, c] }, {id: :role_resource_type, prompt: true} %>
      <= f.select :resource_id, Role::ACTIONS.collect { |c| [c.first, c.last] }, {id: :role_resource_id, prompt: true} %> -->

      <div class="form-group col-md-12">
        <%= f.submit 'Pesquisar', class: 'btn btn-search btn-primary' %>
      </div>
    <% end %>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Planos de Ensino</h3>
  </div>
  <div class="panel-body">
    <% if @resultado.nil? %>
      Nenhum plano de ensino encontrado com os parâmetros informados.
    <% else %>
        <table class='table table-striped table-bordered table-condensed'>
          <thead>
            <tr>
              <th>Disciplina</th>
              <th>Professor</th>
              <th class="text-center">Ano/Semestre</th>
              <th class="text-center">Versão</th>
              <th class="text-center">Situação</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <% @resultado.each do |plano| %>
              <tr>
                <td><%= plano.offer_discipline.grid_discipline.discipline.decorate.title %></td>
                <td><%= plano.user.name %></td>
                <td class="text-center"><%= plano.offer_discipline.offer.decorate.ano_semestre %></td>
                <td class="text-center"><%= plano.decorate.versao %></td>
                <td class="text-center"><%= plano.decorate.situacao %></td>
                <td>Ações</td>
              </tr>
            <% end %>
          </tbody>
        </table>
    <% end %>
  </div>
</div>
